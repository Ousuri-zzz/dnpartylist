# ЁЯСС plan/21e-guild-manage-leaders.md

> р╣Ар╕Юр╕┤р╣Ир╕бр╕гр╕░р╕Ър╕Ър╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣М (р╣Ар╕Юр╕┤р╣Ир╕б/р╕ер╕Ъ)  
> р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Гр╕Щр╕лр╕Щр╣Йр╕▓ `/guild/settings` р╣Вр╕Фр╕вр╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣Мр╕Чр╕╡р╣Ир╕бр╕╡р╕кр╕┤р╕Чр╕Шр╕┤р╣М

---

## ЁЯОп р╣Ар╕Ыр╣Йр╕▓р╕лр╕бр╕▓р╕в

- р╣Гр╕лр╣Йр╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣Мр╕кр╕▓р╕бр╕▓р╕гр╕Ц:
  - тЬЕ р╣Ар╕Юр╕┤р╣Ир╕бр╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣Мр╕Др╕Щр╕нр╕╖р╣Ир╕Щ
  - тЭМ р╕ер╕Ър╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣Мр╕нр╕нр╕Бр╕Ир╕▓р╕Бр╕гр╕░р╕Ър╕Ъ
- р╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Б `/guild/leaders/[uid]: true`

---

## ЁЯСе Step 1: р╕Фр╕╢р╕Зр╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣Мр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

р╕Фр╕╢р╕Зр╕Ир╕▓р╕Б path:
```ts
ref(db, "guild/leaders")
```

р╣Бр╕кр╕Фр╕Зр╣Ар╕Ыр╣Зр╕Щр╕Хр╕▓р╕гр╕▓р╕З:
| UID | Discord Name | р╕Ыр╕╕р╣Ир╕б |
|-----|--------------|------|
| xxx | Tester       | [р╕ер╕Ър╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣М] |

---

## тЮХ Step 2: р╣Ар╕Юр╕┤р╣Ир╕бр╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣Мр╣Гр╕лр╕бр╣И

- Input р╕Бр╕гр╕нр╕Б UID р╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- Optional: р╕Фр╕╢р╕З Discord name р╕Ир╕▓р╕Б `/users/[uid]/meta/discord`
- р╣Ар╕бр╕╖р╣Ир╕нр╕Бр╕Ф "р╣Ар╕Юр╕┤р╣Ир╕б":

```ts
update(ref(db, `guild/leaders/${newUid}`), true)
```

- р╣Бр╕кр╕Фр╕З toast р╕кр╕│р╣Ар╕гр╣Зр╕И

---

## ЁЯЧСя╕П Step 3: р╕ер╕Ър╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣М

- р╣Бр╕кр╕Фр╕Зр╕Ыр╕╕р╣Ир╕б "р╕ер╕Ър╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣М" р╕Цр╣Йр╕▓ `uid !== auth.currentUser.uid` (р╕Бр╕▒р╕Щр╣Др╕бр╣Ир╣Гр╕лр╣Йр╕ер╕Ър╕Хр╕▒р╕зр╣Ар╕нр╕З)
- р╣Ар╕бр╕╖р╣Ир╕нр╕Бр╕Ф:

```ts
remove(ref(db, `guild/leaders/${uid}`))
```

- р╣Бр╕кр╕Фр╕З toast р╣Бр╕ер╕░ refresh list

---

## ЁЯФР Step 4: р╣Ар╕Кр╣Зр╕Др╕кр╕┤р╕Чр╕Шр╕┤р╣М

р╣Гр╕лр╣Йр╣Гр╕Кр╣Й logic:
```ts
const isLeader = (await get(ref(db, `guild/leaders/${auth.uid}`))).exists()
```

р╕лр╕▓р╕Бр╣Др╕бр╣Ир╣Гр╕Кр╣Ир╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣М тЖТ р╕лр╣Йр╕▓р╕бр╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕З

---

## тЬЕ р╕кр╕гр╕╕р╕Ы

| р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣М | р╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╣Ир╕▓р╕Зр╣Др╕г |
|----------|----------------|
| р╕Фр╕╢р╕Зр╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣Мр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф | `/guild/leaders` |
| р╣Ар╕Юр╕┤р╣Ир╕бр╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣М | `update(..., true)` |
| р╕ер╕Ър╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣М | `remove(...)` |
| р╕лр╣Йр╕▓р╕бр╕ер╕Ър╕Хр╕▒р╕зр╣Ар╕нр╕З | р╣Ар╕Кр╣Зр╕Др╕зр╣Ир╕▓ `uid !== auth.uid` |

---

## ЁЯФ░ р╕Юр╕гр╣Йр╕нр╕бр╕Чр╕│р╕Хр╣Ир╕н

- р╣Ар╕Юр╕┤р╣Ир╕б UI р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╣Ир╕нр╕Щр╕ер╕Ъ
- р╕Ыр╕гр╕▒р╕Ър╣Гр╕лр╣Йр╣Ар╕Йр╕Юр╕▓р╕░р╕лр╕▒р╕зр╕Бр╕┤р╕ер╕Фр╣Мр╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕лр╣Зр╕Щ section р╕Щр╕╡р╣Й
