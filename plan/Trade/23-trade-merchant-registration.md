# üõí plan/23-trade-merchant-registration.md

> ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏û‡πà‡∏≠‡∏Ñ‡πâ‡∏≤ (‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô + Discord ID ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö DM ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á)  
> ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Å‡∏¥‡∏•‡∏î‡πå‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô  
> ‡∏´‡∏±‡∏ß‡∏Å‡∏¥‡∏•‡∏î‡πå‡∏à‡∏∞‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ú‡πà‡∏≤‡∏ô `/guild/settings`

---

## üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢

- ‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Å‡∏¥‡∏•‡∏î‡πå‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏û‡πà‡∏≠‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ
- ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Å‡∏¥‡∏•‡∏î‡πå‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô

---

## üìù ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô

### ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å:
- ‚úÖ `bankAccountName` ‚Üí ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£
- ‚úÖ `bankAccountNumber` ‚Üí ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£
- ‚úÖ `bankName` ‚Üí ‡∏ä‡∏∑‡πà‡∏≠‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (‡πÄ‡∏ä‡πà‡∏ô SCB, KBank)
- ‚úÖ `discordId` ‚Üí Discord ID (Developer Mode) ‡πÄ‡∏ä‡πà‡∏ô `823456789012345678`

### ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ **‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å**:
- `discord` ‚Üí ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å `/users/[uid]/meta/discord`

---

## üìÅ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• `/tradeMerchants/[uid]`

```json
{
  bankAccountName: "‡∏ô‡∏≤‡∏¢‡πÄ‡∏≠",
  bankAccountNumber: "1234567890",
  bankName: "SCB",
  discordId: "823456789012345678",
  discord: "Tester#1234",
  status: "pending",
  createdAt: "2025-05-04T12:34:00Z"
}
```

---

## üîê ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô

- ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô `/guild/members/[uid]`
- ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ `/tradeMerchants/[uid]`
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å Firebase Auth + Database ‡∏Å‡πà‡∏≠‡∏ô submit

---

## ‚úÖ Logic ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô

```ts
set(ref(db, `tradeMerchants/${uid}`), {
  bankAccountName,
  bankAccountNumber,
  bankName,
  discordId,
  discord: userMeta.discord,
  status: "pending",
  createdAt: new Date().toISOString()
})
```

---

## üõ°Ô∏è Firebase Rules

```json
"tradeMerchants": {
  "$uid": {
    ".read": "auth != null",
    ".write": "auth.uid === $uid && !data.exists() && root.child('guild/members/' + auth.uid).exists()",
    "bankAccountName": { ".validate": "newData.isString()" },
    "bankAccountNumber": { ".validate": "newData.isString()" },
    "bankName": { ".validate": "newData.isString()" },
    "discordId": { ".validate": "newData.isString()" },
    "discord": { ".validate": "newData.isString()" },
    "status": { ".validate": "newData.val() === 'pending'" },
    "createdAt": { ".validate": "newData.isString()" }
  }
}
```

---

## üëë ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Å‡∏¥‡∏•‡∏î‡πå

- ‡∏´‡∏±‡∏ß‡∏Å‡∏¥‡∏•‡∏î‡πå‡πÄ‡∏´‡πá‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏û‡πà‡∏≠‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà `status = pending`
- ‡∏õ‡∏∏‡πà‡∏° [‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥] ‚Üí ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô `status: "active"`
- ‡∏õ‡∏∏‡πà‡∏° [‡∏£‡∏∞‡∏á‡∏±‡∏ö] ‚Üí ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô `status: "suspended"`
- ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå DM ‚Üí `https://discord.com/users/{discordId}`

---

## ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ

| ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î |
|---------|-------------|
| ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô | ‡∏°‡∏µ 4 ‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á |
| ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå | ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô /guild/members ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏û‡πà‡∏≠‡∏Ñ‡πâ‡∏≤ |
| ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏±‡∏ß‡∏Å‡∏¥‡∏•‡∏î‡πå | ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏£‡∏∞‡∏á‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏ú‡πà‡∏≤‡∏ô /guild/settings |
| ‡πÉ‡∏ä‡πâ Discord ID | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå DM ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á |

